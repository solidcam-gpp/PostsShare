@init_post
global logical LogInTrace  
global integer IntTrace	


if LogInTrace eq false
	LogInTrace = true
	input "Trace level : 0-None ; 1-Mid ; 5-All", IntTrace
endif
trace "all": IntTrace






endp


@start_obj_act

endp

@mco_message
	{nl message}
endp



@start_of_file

endp


@start_of_job
{nl nl,'start of_job 'nl}
{nl,'DU 'get_drive_unit_name(job_name)nl}	
endp


@end_of_job
global string i
{nl,'end of_job'nl}




	
;ostanovka spindelea dlya vsego krome B

		if is_last_job_using_drive_unit(Sync_Data_Name,ChannelID,sync_label,index_job) eq 1
			{nl'kkkkkkkkkkkkkkkkkkkkkkkk'}
			
		endif


endp

@fourth_axis 
	
	
	if fourth_axis_last eq 1 and is_last_job_using_drive_unit(Sync_Data_Name,ChannelID,sync_label,index_job) eq 1
	{nl,'fourth_axis'}
	endif
endp	



@start_program

endp




@end_of_file
	
		

endp


@UdrAxisNames

endp

@move_object
if left(machine_control_name,1) eq '@'
	Print 'DLYA PRAVILNOGO G KODA NEOBHODIMO POSTAVIT OS C V NAPRAVLENII X'
	local string name G0 F 
	local string X Y Z C B 

	X=tostr(move_axis_x:integer_def_f)
	Y=tostr(move_axis_y:integer_def_f) 
  Z=tostr(move_axis_z:integer_def_f)
  if 
	
	if change(move_axis_x) or change(move_axis_y) or change(move_axis_z)
		G0='G0'
	endif

	if feed_move ne 36000.000
		F = ',F'+tostr(feed_move:integer_def_f)
	endif

		
	if move_axis_a lt 0 and submachine_ID gt 4	
		move_axis_a=-1*move_axis_a
	endif

	if name_axis_a eq 'B1'
		{nl 'G910' move_axis_a}
		{nl G0 [' X'move_axis_x:'5.3 (*2)']['Y'move_axis_y] }	
	
	elseif name_axis_a eq ''
		{nl G0 [' X'move_axis_x:'5.3 (*2)'] ['Y'move_axis_y] [' Z'move_axis_z]}


	elseif name_axis_a eq 'C1'
		{nl,'M18'move_axis_a}	
		{nl G0 [' X'move_axis_x:'5.3 (*2)'] ['Y'move_axis_y] [' Z'move_axis_z]}

	elseif name_axis_a eq 'C2'
		{nl,'M18'move_axis_a}	
		{nl G0 [' X'move_axis_x:'5.3 (*2)'] ['Y'move_axis_y] [' Z'move_axis_z]}

	endif
		if G0 ne ''
			{F}
		endif	
endif
endp

@unload_tool
	{nl 'jjjjjjjjjjj '}
endp